!function(t){var e=function(t,e){t.data("fliped",!0),t.css({transform:e})},i=function(t){t.data("fliped",!1),t.css({transform:"rotatex(0deg)"})};t.fn.flip=function(a){return this.each(function(){var o=t(this);if(void 0!==a&&"boolean"==typeof a)a?e(o,o.data("flipedRotate")):i(o);else{var r,s=t.extend({axis:"y",reverse:!1,trigger:"click",speed:500},a),n=s.reverse?"-180deg":"180deg";"x"==s.axis.toLowerCase()?(r=2*o.outerHeight(),o.data("flipedRotate","rotatex("+n+")")):(r=2*o.outerWidth(),o.data("flipedRotate","rotatey("+n+")"));var d=o.data("flipedRotate");o.wrap("<div class='flip'></div>"),o.parent().css({perspective:r,position:"relative","margin-top":o.css("margin-top"),"margin-bottom":o.css("margin-bottom"),"margin-left":o.css("margin-left"),"margin-right":o.css("margin-right"),width:o.outerWidth(),height:o.outerHeight()});var f=s.speed/1e3||.5;if(o.css({"transform-style":"preserve-3d",transition:"all "+f+"s ease-out",margin:"0px"}),o.find(".front, .back").outerHeight(o.height()),o.find(".front, .back").outerWidth(o.width()),o.find(".front, .back").css({position:"absolute","backface-visibility":"hidden"}),o.find(".back").css({transform:d}),"click"==s.trigger.toLowerCase())o.find('button, a, input[type="submit"]').click(function(t){t.stopPropagation()}),o.click(function(){o.data("fliped")?i(o):e(o,d)});else if("hover"==s.trigger.toLowerCase()){var c=function(){o.unbind("mouseleave",u),e(o,d),setTimeout(function(){o.bind("mouseleave",u),o.is(":hover")||i(o)},s.speed+150)},u=function(){i(o)};o.mouseenter(c),o.mouseleave(u)}}}),this}}(jQuery);